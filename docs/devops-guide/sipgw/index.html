<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Configuring a video SIP gateway · Jitsi Meet Handbook</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This document describes how you can configure jitsi-meet to use sipgw jibri and enable rooms in &#x27;Add people dialog&#x27;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Configuring a video SIP gateway · Jitsi Meet Handbook"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jitsi.github.io/handbook/"/><meta property="og:description" content="This document describes how you can configure jitsi-meet to use sipgw jibri and enable rooms in &#x27;Add people dialog&#x27;"/><meta property="og:image" content="https://jitsi.github.io/handbook/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jitsi.github.io/handbook/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/handbook/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/handbook/js/scrollSpy.js"></script><link rel="stylesheet" href="/handbook/css/main.css"/><script src="/handbook/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/handbook/"><img class="logo" src="/handbook/img/logo-white.png" alt="Jitsi Meet Handbook"/><h2 class="headerTitleWithLogo">Jitsi Meet Handbook</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/handbook/docs/intro" target="_self">Docs</a></li><li class=""><a href="/handbook/help" target="_self">Help</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Configuring a video SIP gateway</h1></header><article><div><span><p>This document describes how you can configure jitsi-meet to use sipgw jibri and enable rooms in 'Add people dialog'
You will need a working deployment of jibri configured to use a regular sip video device, for more info check out the <a href="https://github.com/jitsi/jibri/blob/master/README.md">jibri documentation</a>.</p>
<p>This feature is available for non-guests of the system, so this relies on setting in config.js <code>enableUserRolesBasedOnToken: true</code> and providing a jwt token when accessing the conference.</p>
<ul>
<li>Jicofo configuration:
edit /etc/jitsi/jicofo/sip-communicator.properties (or similar), set the appropriate MUC to look for the Jibri Controllers. This should be the same MUC as is referenced in jibri's config.json file. Restart Jicofo after setting this property.</li>
</ul>
<pre><code class="hljs">  org<span class="hljs-selector-class">.jitsi</span><span class="hljs-selector-class">.jicofo</span><span class="hljs-selector-class">.jibri</span>.SIP_BREWERY=TheSipBrewery@conference<span class="hljs-selector-class">.yourdomain</span><span class="hljs-selector-class">.com</span>
</code></pre>
<ul>
<li>Jitsi Meet configuration:</li>
</ul>
<ul>
<li>config.js: add</li>
</ul>
<pre><code class="hljs">  <span class="hljs-attribute">enableUserRolesBasedOnToken</span>: true,
  <span class="hljs-attribute">peopleSearchQueryTypes</span>: [<span class="hljs-string">'conferenceRooms'</span>],
  <span class="hljs-attribute">peopleSearchUrl</span>: <span class="hljs-string">'https://api.yourdomain.com/testpath/searchpeople'</span>,
</code></pre>
<p>The combination of the above settings and providing a jwt token will enable a button under invite option which will show the dialog 'Add people'.</p>
<h2><a class="anchor" aria-hidden="true" id="people-search-service"></a><a href="#people-search-service" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>People search service</h2>
<p>When searching in the dialog, a request for results is made to the <code>peopleSearchUrl</code> service.</p>
<p>The request is in the following format:</p>
<pre><code class="hljs"><span class="hljs-link">https://api.yourdomain.com/testpath/searchpeople?query=testroomname&amp;queryTypes=</span>[<span class="hljs-string">%22conferenceRooms%22</span>]&amp;jwt=somejwt
</code></pre>
<p>The parameters are:</p>
<ul>
<li>query - The text entered by the user.</li>
<li>queryTypes - What type of results we want people, rooms, conferenceRooms. This is the value from config.js <code>peopleSearchQueryTypes</code></li>
<li>jwt - The token used by the user to access the conference.</li>
</ul>
<p>The response of the service is a json in the following format:</p>
<pre><code class="hljs">[
   {
       <span class="hljs-attr">"id"</span>: <span class="hljs-string">"address@sip.domain.com"</span>,
       <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Some room name"</span>,
       <span class="hljs-attr">"type"</span>: <span class="hljs-string">"videosipgw"</span>
   },
  {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"address2@sip.domain.com"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Some room name2"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"videosipgw"</span>
  }
]
</code></pre>
<p>Type should be <code>videosipgw</code>, <code>name</code> is the name shown to the user and <code>id</code> is the sip address to be called by the sipgw jibri.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 5/18/2020</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#people-search-service">People search service</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/handbook/" class="nav-home"><img src="/handbook/img/logo-white.png" alt="Jitsi Meet Handbook" width="66" height="58"/></a><div><h5>Docs</h5><a href="/handbook/docs/en/intro.html">Introduction</a><a href="/handbook/docs/en/user-guide/user-guide-start.html">User Guide</a><a href="/handbook/docs/en/dev-guide/dev-guide-start.html">Developer Guide</a><a href="/handbook/docs/en/devops-guide/devops-guide-start.html">DevOps Guide</a></div><div><h5>Community</h5><a href="https://community.jitsi.org" target="_blank" rel="noreferrer noopener">Project Forum</a></div><div><h5>More</h5><a class="github-button" href="https://github.com/jitsi/jitsi-meet" data-icon="octicon-star" data-count-href="/jitsi/jitsi-meet/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><div class="social"><a href="https://twitter.com/jitsinews" class="twitter-follow-button">Follow @jitsinews</a></div></div></section><section class="copyright">Copyright © 2020</section></footer></div><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script></body></html>